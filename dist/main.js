(()=>{"use strict";(function(e){const t=document.getElementById("timer-hours"),a=document.getElementById("timer-minutes"),o=document.getElementById("timer-seconds");function l(e){return e<10&&(e="0"+e),e}const n=setInterval(c,1e3);function c(){const e=function(){const e=(new Date("16 may 2021").getTime()-(new Date).getTime())/1e3,t=Math.floor(e%60),a=Math.floor(e/60%60);return{timeRemaining:e,hours:Math.floor(e/60/60),seconds:t,minutes:a}}();t.textContent=l(e.hours),a.textContent=l(e.minutes),o.textContent=l(e.seconds),e.timeRemaining<=0&&(t.textContent="00",a.textContent="00",o.textContent="00",clearInterval(n))}c()})(),(()=>{const e=document.querySelector("menu");document.addEventListener("click",(t=>{const a=t.target,o=a.closest(".menu"),l=a.closest(".close-btn"),n=a.closest(".active-menu");o?e.classList.add("active-menu"):n&&!l&&"A"!==a.tagName||e.classList.remove("active-menu")}))})(),(()=>{const e=document.querySelector(".popup");let t,a;function o(e){e.style.opacity=1;let a=e.style.opacity?parseFloat(e.style.opacity):parseInt(e.style.filter)/100;t=requestAnimationFrame((function o(){t=requestAnimationFrame(o),a>=0?(a-=.03,e.style.opacity=a,e.style.filter=`alpha(opacity='${100*a}')`):a<0&&(cancelAnimationFrame(t),e.style.display="none")}))}document.getElementById("form3").style.color="white",document.addEventListener("click",(t=>{let l=t.target;l.matches(".popup-btn")?document.documentElement.clientWidth>=768?function(e){e.style.opacity=0,e.style.display="block";let t=e.style.opacity?parseFloat(e.style.opacity):parseInt(e.style.filter)/100;a=requestAnimationFrame((function o(){a=requestAnimationFrame(o),t<1?(t+=.03,e.style.opacity=t,e.style.filter=`alpha(opacity='${100*t}')`):t>=1&&cancelAnimationFrame(a)}))}(e):(e.style.opacity=1,e.style.display="block"):l.matches(".popup-close")?document.documentElement.clientWidth>=768?o(e):e.style.display="none":(l=l.closest(".popup-content"),l||(document.documentElement.clientWidth>=768?o(e):e.style.display="none"))}))})(),(()=>{const e=document.querySelector(".service-header"),t=e.querySelectorAll(".service-header-tab"),a=document.querySelectorAll(".service-tab"),o=e=>{a.forEach(((a,o)=>{e===o?(t[o].classList.add("active"),a.classList.remove("d-none")):(a.classList.add("d-none"),t[o].classList.remove("active"))}))};o(0),e.addEventListener("click",(e=>{let a=e.target;a=a.closest(".service-header-tab"),a&&t.forEach(((e,t)=>{e===a&&o(t)}))}))})(),(()=>{const e=document.getElementById("all-progects"),t=e.querySelectorAll(".portfolio-item"),a=[];document.querySelectorAll(".dot").forEach((e=>{e.remove()})),t.forEach(((e,t)=>{const o=document.createElement("li");o.classList=0===t?"dot-active dot":"dot",a.push(o),document.querySelector(".portfolio-dots").append(o)}));let o,l=0;const n=(e,t,a)=>{e[t].classList.remove(a)},c=(e,t,a)=>{e[t].classList.add(a)},s=()=>{n(t,l,"portfolio-item-active"),n(a,l,"dot-active"),l++,l>=t.length&&(l=0),c(t,l,"portfolio-item-active"),c(a,l,"dot-active")},r=(e=2e3)=>{o=setInterval(s,e)};e.addEventListener("click",(e=>{e.preventDefault();const o=e.target;o.matches(".portfolio-btn, .dot")&&(n(t,l,"portfolio-item-active"),n(a,l,"dot-active"),o.matches("#arrow-right")?(l++,l>=t.length&&(l=0)):o.matches("#arrow-left")?(l--,l<0&&(l=t.length-1)):o.matches(".dot")&&a.forEach(((e,t)=>{e===o&&(l=t)})),c(t,l,"portfolio-item-active"),c(a,l,"dot-active"))})),e.addEventListener("mouseover",(e=>{(e.target.matches(".portfolio-btn")||e.target.matches(".dot"))&&clearInterval(o)})),e.addEventListener("mouseout",(e=>{(e.target.matches(".portfolio-btn")||e.target.matches(".dot"))&&r()})),r()})(),document.addEventListener("mouseover",(e=>{const t=e.target;t.matches(".command__photo")&&(t.src=t.dataset.img)})),document.addEventListener("mouseout",(e=>{const t=e.target;if(t.matches(".command__photo")){let e=t.src;e=e.substring(0,e.indexOf("a.jpg"))+".jpg",t.src=e}})),document.querySelectorAll(".form-email").forEach((e=>{e.required=!0})),document.addEventListener("input",(e=>{const t=e.target;t.matches(".calc-block>input")?t.value=t.value.replace(/\D/,""):t.matches(".form-name, #form2-name")?t.value=t.value.replace(/[^ А-яа-я]/,""):t.matches("#form2-message")?t.value=t.value.replace(/[^ А-яа-я\.\,\!\:\;\-\)\(]/,""):t.matches(".form-email")?t.value=t.value.replace(/[^\w\-@\.\!~\*']/g,""):t.matches(".form-phone")&&(t.value=t.value.replace(/[^\d\+]/g,""))})),document.addEventListener("blur",(e=>{const t=e.target;if(t.matches(".calc-block>input")){const e=t.value.match(/\d/g);null!==e&&(t.value=e.join(""))}else if(t.matches(".form-name, #form2-name"))t.value=t.value.replace(/\s+/g," "),t.value=t.value.replace(/(\s\-)+/g,""),t.value=t.value.replace(/\-+/g,"-"),t.value=t.value.replace(/^[\s\-]+/gi,""),t.value=t.value.replace(/\w+/gi,""),t.value=t.value.replace(/\-$/gi,""),t.value&&(t.value=t.value.split(/\s+/).map((e=>e[0].toUpperCase()+e.substring(1).toLowerCase())).join(" "));else if(t.matches(".form-email")){let e=t.value.match(/@/);e||""===t.value?(e=t.value.match(/[\w\.]{1,10}@[a-z1-9]{2,10}\.[a-z]{2,3}/gi),e||""===t.value||(alert("Неверно указан домен"),t.value="")):(alert("E-mail должен содержать символ @"),t.value="")}else t.matches(".form-phone")?(t.value=t.value.replace(/^8{1}|^7|\+7/gi,"+7 "),t.value=t.value.replace(/^...([0-9]{3})/g,((e,t)=>`+7 ${t} `)),14!==t.value.length&&""!==t.value&&(t.value="",alert("Проверьте номер"))):t.matches("#form2-message")&&(t.value=t.value.replace(/\s+/g," "),t.value=t.value.replace(/\-+/g,"-"),t.value=t.value.replace(/^[\s\-]+/gi,""),t.value=t.value.replace(/\w+/gi,""),t.value=t.value.replace(/([а-я]{1})/i,((e,t)=>t.toUpperCase())))}),!0),((e=100)=>{const t=document.querySelector(".calc-type"),a=document.querySelector(".calc-square"),o=document.querySelector(".calc-count"),l=document.querySelector(".calc-day"),n=document.getElementById("total");document.querySelector(".calc-block").addEventListener("change",(c=>{const s=c.target;(s.matches("select")||s.matches("input"))&&(()=>{let c=0,s=1,r=1;const i=t.options[t.selectedIndex].value,u=+a.value;let m;o.value>1&&o.value&&(s+=(o.value-1)/10),r=l.value<5&&l.value?2:l.value<10&&l.value?1.5:1,i&&u&&(c=Math.ceil(e*i*u*s*r)),m=requestAnimationFrame((function e(){let t=parseInt(n.textContent);m=requestAnimationFrame(e),t<c?(t+=Math.ceil(.05*(c-t)),n.textContent=t):t>c?(t-=Math.ceil(.05*(t-c)),n.textContent=t):(n.textContent=c,cancelAnimationFrame(m))}))})()}))})(100),(()=>{const e=document.querySelectorAll('[name="user_form"]'),t=document.createElement("div"),a=document.createElement("div");let o;t.appendChild(a),t.style.cssText="font-size: 2rem",e.forEach((e=>{e.addEventListener("submit",(l=>{l.preventDefault(),e.appendChild(t),a.textContent="",t.classList.add("lds-circle");const n=new FormData(e),c={};if(n.forEach(((e,t)=>{c[t]=e})),!c.user_email)throw document.querySelectorAll("input").forEach((e=>{e.value=""})),t.classList.remove("lds-circle"),a.textContent="Не заполнено обязательное поле E-Mail",setTimeout((()=>a.textContent=""),3e3),new Error("email is empty");(e=>fetch("./server.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}))(c).then((l=>{if(200!==l.status)throw new Error("Network status is not 200");t.classList.remove("lds-circle"),a.textContent="Спасибо, мы скоро с Вами свяжемся",setTimeout((()=>a.textContent=""),3e3),document.querySelectorAll("input").forEach((e=>{e.value=""})),e.matches("#form3")&&setTimeout((()=>{document.documentElement.clientWidth>=768?function(e){e.style.opacity=1;let t=e.style.opacity?parseFloat(e.style.opacity):parseInt(e.style.filter)/100;o=requestAnimationFrame((function a(){o=requestAnimationFrame(a),t>=0?(t-=.03,e.style.opacity=t,e.style.filter=`alpha(opacity='${100*t}')`):t<0&&(cancelAnimationFrame(o),e.style.display="none")}))}(document.querySelector(".popup")):document.querySelector(".popup").style.display="none"}),2e3)})).catch((e=>{t.classList.remove("lds-circle"),a.textContent="Что-то пошло не так",setTimeout((()=>a.textContent=""),3e3),console.error(e)}))}))}))})()})();