(()=>{"use strict";(function(e){const t=document.getElementById("timer-hours"),a=document.getElementById("timer-minutes"),l=document.getElementById("timer-seconds");function o(e){return e<10&&(e="0"+e),e}const c=setInterval(n,1e3);function n(){const e=function(){const e=(new Date("16 may 2021").getTime()-(new Date).getTime())/1e3,t=Math.floor(e%60),a=Math.floor(e/60%60);return{timeRemaining:e,hours:Math.floor(e/60/60),seconds:t,minutes:a}}();t.textContent=o(e.hours),a.textContent=o(e.minutes),l.textContent=o(e.seconds),e.timeRemaining<=0&&(t.textContent="00",a.textContent="00",l.textContent="00",clearInterval(c))}n()})(),(()=>{const e=document.querySelector("menu");document.addEventListener("click",(t=>{const a=t.target,l=a.closest(".menu"),o=a.closest(".close-btn"),c=a.closest(".active-menu");l?e.classList.add("active-menu"):c&&!o&&"A"!==a.tagName||e.classList.remove("active-menu")}))})(),(()=>{const e=document.querySelector(".popup");let t,a;function l(e){e.style.opacity=1;let a=e.style.opacity?parseFloat(e.style.opacity):parseInt(e.style.filter)/100;t=requestAnimationFrame((function l(){t=requestAnimationFrame(l),a>=0?(a-=.03,e.style.opacity=a,e.style.filter=`alpha(opacity='${100*a}')`):a<0&&(cancelAnimationFrame(t),e.style.display="none")}))}document.getElementById("form3").style.color="white",document.addEventListener("click",(t=>{let o=t.target;o.matches(".popup-btn")?document.documentElement.clientWidth>=768?function(e){e.style.opacity=0,e.style.display="block";let t=e.style.opacity?parseFloat(e.style.opacity):parseInt(e.style.filter)/100;a=requestAnimationFrame((function l(){a=requestAnimationFrame(l),t<1?(t+=.03,e.style.opacity=t,e.style.filter=`alpha(opacity='${100*t}')`):t>=1&&cancelAnimationFrame(a)}))}(e):(e.style.opacity=1,e.style.display="block"):o.matches(".popup-close")?document.documentElement.clientWidth>=768?l(e):e.style.display="none":(o=o.closest(".popup-content"),o||(document.documentElement.clientWidth>=768?l(e):e.style.display="none"))}))})(),(()=>{const e=document.querySelector(".service-header"),t=e.querySelectorAll(".service-header-tab"),a=document.querySelectorAll(".service-tab"),l=e=>{a.forEach(((a,l)=>{e===l?(t[l].classList.add("active"),a.classList.remove("d-none")):(a.classList.add("d-none"),t[l].classList.remove("active"))}))};l(0),e.addEventListener("click",(e=>{let a=e.target;a=a.closest(".service-header-tab"),a&&t.forEach(((e,t)=>{e===a&&l(t)}))}))})(),(()=>{const e=document.getElementById("all-progects"),t=e.querySelectorAll(".portfolio-item"),a=[];document.querySelectorAll(".dot").forEach((e=>{e.remove()})),t.forEach(((e,t)=>{const l=document.createElement("li");l.classList=0===t?"dot-active dot":"dot",a.push(l),document.querySelector(".portfolio-dots").append(l)}));let l,o=0;const c=(e,t,a)=>{e[t].classList.remove(a)},n=(e,t,a)=>{e[t].classList.add(a)},s=()=>{c(t,o,"portfolio-item-active"),c(a,o,"dot-active"),o++,o>=t.length&&(o=0),n(t,o,"portfolio-item-active"),n(a,o,"dot-active")},r=(e=2e3)=>{l=setInterval(s,e)};e.addEventListener("click",(e=>{e.preventDefault();const l=e.target;l.matches(".portfolio-btn, .dot")&&(c(t,o,"portfolio-item-active"),c(a,o,"dot-active"),l.matches("#arrow-right")?(o++,o>=t.length&&(o=0)):l.matches("#arrow-left")?(o--,o<0&&(o=t.length-1)):l.matches(".dot")&&a.forEach(((e,t)=>{e===l&&(o=t)})),n(t,o,"portfolio-item-active"),n(a,o,"dot-active"))})),e.addEventListener("mouseover",(e=>{(e.target.matches(".portfolio-btn")||e.target.matches(".dot"))&&clearInterval(l)})),e.addEventListener("mouseout",(e=>{(e.target.matches(".portfolio-btn")||e.target.matches(".dot"))&&r()})),r()})(),document.addEventListener("mouseover",(e=>{const t=e.target;t.matches(".command__photo")&&(t.src=t.dataset.img)})),document.addEventListener("mouseout",(e=>{const t=e.target;if(t.matches(".command__photo")){let e=t.src;e=e.substring(0,e.indexOf("a.jpg"))+".jpg",t.src=e}})),document.querySelectorAll(".form-email").forEach((e=>{e.required=!0})),document.addEventListener("input",(e=>{const t=e.target;t.matches(".calc-block>input")?t.value=t.value.replace(/\D/,""):t.matches(".form-name, #form2-name")?t.value=t.value.replace(/[^ А-яа-я]/,""):t.matches("#form2-message")?t.value=t.value.replace(/[^ А-яа-я\.\,\!\:\;\-\)\(]/,""):t.matches(".form-email")?t.value=t.value.replace(/[^\w\-@\.\!~\*']/g,""):t.matches(".form-phone")&&(t.value=t.value.replace(/[^\d\+]/g,""))})),document.addEventListener("blur",(e=>{const t=e.target;if(t.matches(".calc-block>input")){const e=t.value.match(/\d/g);null!==e&&(t.value=e.join(""))}else if(t.matches(".form-name, #form2-name"))t.value=t.value.replace(/\s+/g," "),t.value=t.value.replace(/(\s\-)+/g,""),t.value=t.value.replace(/\-+/g,"-"),t.value=t.value.replace(/^[\s\-]+/gi,""),t.value=t.value.replace(/\w+/gi,""),t.value=t.value.replace(/\-$/gi,""),t.value&&(t.value=t.value.split(/\s+/).map((e=>e[0].toUpperCase()+e.substring(1).toLowerCase())).join(" "));else if(t.matches(".form-email")){let e=t.value.match(/@/);e||""===t.value?(e=t.value.match(/[\w\.]{1,10}@[a-z1-9]{2,10}\.[a-z]{2,3}/gi),e||""===t.value||(alert("Неверно указан домен"),t.value="")):(alert("E-mail должен содержать символ @"),t.value="")}else t.matches(".form-phone")?(t.value=t.value.replace(/^8{1}|^7|\+7/gi,"+7 "),t.value=t.value.replace(/^...([0-9]{3})/g,((e,t)=>`+7 ${t} `)),14!==t.value.length&&""!==t.value&&(t.value="",alert("Проверьте номер"))):t.matches("#form2-message")&&(t.value=t.value.replace(/\s+/g," "),t.value=t.value.replace(/\-+/g,"-"),t.value=t.value.replace(/^[\s\-]+/gi,""),t.value=t.value.replace(/\w+/gi,""),t.value=t.value.replace(/([а-я]{1})/i,((e,t)=>t.toUpperCase())))}),!0),((e=100)=>{const t=document.querySelector(".calc-type"),a=document.querySelector(".calc-square"),l=document.querySelector(".calc-count"),o=document.querySelector(".calc-day"),c=document.getElementById("total");document.querySelector(".calc-block").addEventListener("change",(n=>{const s=n.target;(s.matches("select")||s.matches("input"))&&(()=>{let n=0,s=1,r=1;const i=t.options[t.selectedIndex].value,u=+a.value;let m;l.value>1&&l.value&&(s+=(l.value-1)/10),r=o.value<5&&o.value?2:o.value<10&&o.value?1.5:1,i&&u&&(n=Math.ceil(e*i*u*s*r)),m=requestAnimationFrame((function e(){let t=parseInt(c.textContent);m=requestAnimationFrame(e),t<n?(t+=Math.ceil(.05*(n-t)),c.textContent=t):t>n?(t-=Math.ceil(.05*(t-n)),c.textContent=t):(c.textContent=n,cancelAnimationFrame(m))}))})()}))})(100),(()=>{const e=document.querySelectorAll('[name="user_form"]'),t=document.createElement("div"),a=document.createElement("div");let l;t.appendChild(a),t.style.cssText="font-size: 2rem",e.forEach((e=>{e.addEventListener("submit",(o=>{o.preventDefault(),e.appendChild(t),a.textContent="",t.classList.add("lds-circle");const c=new FormData(e),n={};if(c.forEach(((e,t)=>{n[t]=e})),!n.user_email)throw document.querySelectorAll("input").forEach((e=>{e.value=""})),t.classList.remove("lds-circle"),a.textContent="Не заполнено обязательное поле E-Mail",new Error("email is empty");(e=>fetch("./server.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}))(n).then((o=>{if(200!==o.status)throw new Error("Network status is not 200");a.textContent="Спасибо, мы скоро с Вами свяжемся",t.classList.remove("lds-circle"),document.querySelectorAll("input").forEach((e=>{e.value=""})),e.matches("#form3")&&setTimeout((()=>{document.documentElement.clientWidth>=768?function(e){e.style.opacity=1;let t=e.style.opacity?parseFloat(e.style.opacity):parseInt(e.style.filter)/100;l=requestAnimationFrame((function a(){l=requestAnimationFrame(a),t>=0?(t-=.03,e.style.opacity=t,e.style.filter=`alpha(opacity='${100*t}')`):t<0&&(cancelAnimationFrame(l),e.style.display="none")}))}(document.querySelector(".popup")):document.querySelector(".popup").style.display="none"}),2e3)})).catch((e=>{t.classList.remove("lds-circle"),a.textContent="Что-то пошло не так",console.error(e)}))}))}))})()})();